---

copyright:
  years: 2016

---
<!-- Copyright info at top of file: REQUIRED
    The copyright info is YAML content that must occur at the top of the MD file, before attributes are listed.
    It must be surrounded by 3 dashes.
    The value "years" can contain just one year or a two years separated by a comma. (years: 2014, 2016)
    Indentation as per the previous template must be preserved.
-->

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}

# ビルドとデプロイ
{: #deliverypipeline_build_deploy}
最終更新日: 2016 年 11 月 17 日
{: .last-updated}

IBM&reg; Bluemix&reg; {{site.data.keyword.deliverypipeline}} サービスでは、反復可能な継続的統合および継続的デリバリーのプロセスを実装できます。
{:shortdesc}

パイプラインを作成して構成するには、以下のタスクを実行します。

## ステージの追加
{: #deliverypipeline_add_stage}

1. 「パイプライン」ページで、**「ステージの追加」**をクリックします。「ステージ構成」ページが開きます。
2. ステージを構成します。
  1. **「入力」**タブで、ステージの入力を選択します。
  2. **「ジョブ」**タブで、少なくとも 1 つのジョブを追加して構成します。通常、最初のステージには、少なくとも 1 つのビルド・ジョブがあります。
3. **「保存」**をクリックします。

## ステージへのジョブの追加
{: #deliverypipeline_add_job}

1. ステージで、**「ステージ構成」**アイコンをクリックし、**「ステージの構成」**をクリックします。
2. **「ジョブ」**タブをクリックします。
3. **「ジョブの追加」**をクリックします。追加するジョブのタイプを選択します。
4. ジョブを構成します。
5. **「保存」**をクリックします。

![ステージへのジョブの追加](./images/AddJob2.png)

## ステージの実行
{: #deliverypipeline_run_stage}

「パイプライン」ページで**「ステージの実行」**アイコンをクリックして、手動でステージを実行できます。

![ステージでの「ステージの実行」アイコンのクリック](./images/RunStage.png)

次の 2 つの方法のいずれかを使用して、ビルド履歴ページからオンデマンドのビルドとデプロイメントを要求することもできます。
* 構成されたステージの下にあるボックスにビルドをドラッグする。
* ビルドの隣にある**「送信先」**アイコンをクリックして、デプロイ先のスペースを選択する。![「このビルドでステージを実行する (Execute stage with this build)」アイコン](./images/deploy_to.png)

実行中のステージをキャンセルするには、ステージで**「ログおよび履歴の表示」**をクリックします。ジョブのリストで、実行中のジョブの番号をクリックし、**「キャンセル」**をクリックします。ジョブをクリックして**「キャンセル」**をクリックするか、そのステージのジョブの隣にある**「停止」**アイコンをクリックすることにより、ジョブを個別にキャンセルすることもできます。

## アプリのデプロイ
{: #deliverypipeline_deploy}

デプロイ・ジョブが適切に構成されていれば、いつでもそのジョブが実行されるときに、アプリがターゲットにデプロイされます。デプロイ・ジョブを手動で実行するには、ジョブがあるステージの**「ステージの実行」**アイコンをクリックします。

###入力の改訂
ステージを手動で実行するか、その前のステージが完了したために実行される場合、実行中のステージはその入力の改訂を選択します。通常、入力の改訂はビルド番号です。入力の改訂を選択するには、ステージは以下の条件に従う必要があります。

* 特定の改訂が選択されている場合は、それを使用する。
* 特定の改訂が指定されていない場合は、同じ入力を使用するステージが見つかるまで前のステージを検索し、その入力の最後に成功した実行の改訂を見つけて使用する。
* 特定の改訂が指定されておらず、その他のステージが指定ソースを入力として使用しない場合、入力の最新の改訂を使用する。

**ヒント:** 前のビルドをデプロイすることができます。ビルドが含まれるステージで、**「ログおよび履歴の表示」**をクリックします。ページが開いたら、実行番号をクリックして展開し、ビルド・ジョブをクリックします。**「送信先」**をクリックし、ターゲットを選択します。

###アプリへのサービスの追加
アプリにサービスを追加し、Bluemix ダッシュボードまたは Cloud Foundry コマンド・ライン・インターフェース (CLI) からそれらのサービスを管理することができます。DevOps Services パイプライン・ジョブでは、スクリプトで Cloud Foundry CLI コマンドを発行することもできます。例えば、デプロイ・ジョブのスクリプトでアプリにサービスを追加することができます。サービスの追加について詳しくは、[アプリケーションへのサービスの追加](https://www.ng.bluemix.net/docs/services/reqnsi.html#add_service)を参照してください。

## ログの表示
{: #deliverypipeline_view_logs}

「ステージ履歴」ページでの実行中に、ジョブのログおよびステージを表示することができます。

ジョブのログを表示するには、ジョブをクリックします。または、ステージで**「ログおよび履歴の表示」**をクリックします。

デプロイされているアプリケーションのランタイム・ログを表示するには、**「ランタイム・ログの表示」**をクリックします。

![関連するログを開くためにクリックできるステージ・タイル内の領域](./images/view_logs_and_history.png)

ジョブ・ログに加えて、ビルド・ジョブの単体テストの結果、生成された成果物、コードの変更も表示できます。

「ステージ履歴」ページからステージを実行、キャンセル、または構成することもできます。ステージを実行するには**「実行」**をクリックし、ステージを構成するには**「構成」**をクリックします。ステージの実行中に実行番号をクリックして**「キャンセル」**をクリックすることにより、そのステージをキャンセルできます。


